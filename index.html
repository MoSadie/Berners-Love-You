<html>

<head>
    <title>
        Berners Love You!
    </title>

    <link rel="icon" href="favicon.ico" type="image/x-icon" />

    <style>
        p,
        h1,
        h2,
        blockquote,
        .twitter-tweet {
            width: fit-content;
            margin: auto;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script>

        function loadPost() {
            $.getJSON("posts.json", function(data) {
                removeEmbed();
                var postIndex = Math.floor(Math.random() * data.length);
                var postURL = data[postIndex];
                if (postURL.startsWith("https://reddit.com")) {
                    createEmbed("reddit-card", postURL);
                } else if (postURL.startsWith("https://twitter.com")) {
                    createEmbed("twitter-tweet", postURL);
                }
                
                document.getElementById("backupLink").setAttribute("href", postURL);

                console.log("Fun fact: There are currently " + data.length + " total posts to see!");
            });
        }

        function removeEmbed() {
            var box = document.getElementById("embed-box");

            box.childNodes.forEach(function(child) {
                box.removeChild(child);
            });
        }

        function createEmbed(postClass, postURL) {
            var box = document.getElementById("embed-box");
            var embed = document.createElement("blockquote");
            embed.setAttribute("id", "embed");
            embed.setAttribute("class", postClass);

            var embedLink = document.createElement("a");
            embedLink.setAttribute("id","post");
            embedLink.setAttribute("href", postURL);
            embedLink.innerHTML = postURL;

            embed.appendChild(embedLink);

            box.appendChild(embed);
        }
    </script>
</head>

<body>
    <h1>Berners Love You!</h1>
    <h2>Here is a random Burnese Mountain Dog pic/video to make you smile!</h2>
    <div id="embed-box"><blockquote id="embed" class="reddit-card"><a id="post" href="https://reddit.com/r/bernesemountaindogs/">Loading a
            post, please wait a few seconds...</a></blockquote></div>
    <p>If the content above doesn't display correctly (ex. vertical video cut off weirdly), click <a id="backupLink"
            href="/">here</a> to view the original post.</p>
    <script>loadPost()</script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script async src="https://embed.redditmedia.com/widgets/platform.js" charset="UTF-8"></script>
    <p><button onClick="location.reload()">Click for a new post!</button></p>
</body>

</html>
